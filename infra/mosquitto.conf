# Mosquitto MQTT Broker Configuration
# IoT Demo Setup

# ===================== BASIC SETTINGS =====================
# Persistence settings
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest stdout
log_type error
log_type warning  
log_type notice
log_type information
log_timestamp true

# ===================== TCP LISTENER (1883) =====================
# Main MQTT listener for devices and applications
listener 1883
protocol mqtt

# Demo mode - allow anonymous for easy testing
allow_anonymous true

# ===================== WEBSOCKET LISTENER (9001) =====================  
# WebSocket listener for web browsers
listener 9001
protocol websockets

# Demo mode - allow anonymous for easy testing  
allow_anonymous true

# ===================== ACCESS CONTROL =====================
# Access Control List (optional)
# acl_file /mosquitto/config/acl_file

# ===================== CONNECTION LIMITS =====================
# Maximum connections per listener
max_connections -1

# Keep alive settings  
max_keepalive 300

# Message size limits
message_size_limit 0

# ===================== RETAINED MESSAGES =====================
# Allow retained messages (needed for device state & LWT)
max_retained_messages -1

# ===================== BRIDGE SETTINGS (if needed) =====================
# Uncomment to bridge to cloud MQTT broker
# connection cloud-bridge
# address mqtt.cloud-provider.com:1883
# topic lab/room1/# out 0
# username cloud_user
# password cloud_pass